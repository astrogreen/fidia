{% extends 'rest_framework/api.html' %}
{% load staticfiles %}
{% load rest_framework %}
{% load i18n %}
{% load internal_extras %}
{% load data_browser_tag %}
{% block title %}Data Browser{% endblock %}
{% block head-extra %}

{% endblock %}

{% block page_title %}Data Browser{% endblock %}
{% block useful_links %}
<li role="presentation"><a href="{% url 'documentation:topic-detail' slug='data-browser' %}">Need Help?</a></li>
{% endblock useful_links %}

{% block sidebar %}
<h5>Page Contents</h5>
<div class="page-contents">
    <ul class="nav nav-pills nav-stacked nav-sidebar">
        <li role="presentation"><a class="scroll" href="#top-of-page">Data Browser Access</a></li>
        <li role="presentation"><a class="scroll" href="#features">Features</a></li>
    </ul>
</div>
<hr>
<h5>Quick Links</h5>
<div class="quick-links">
    <ul class="nav-sidebar">

         <li>
            {% if breadcrumblist %}
            {% with breadcrumblist|length|add:"-2" as b %}
            <a href="{{breadcrumblist|key:b|key:1}}"> <i class="fa fa-angle-left"></i> Back to
                {{breadcrumblist|key:b|key:0}}</a>
            {% endwith %}
            {% endif %}
        </li>
        <li role="presentation"><a href="{% url 'documentation:topic-detail' slug='data-browser' %}">Data Browser Documentation</a></li>
        {% for value in response.data.surveys %}
        {% if value.current_version != 0%}
        <!--<li role="presentation"><a href="{{value.survey}}/"><span>Data Browser for {{value.survey|uppercase}}-->
            <!--<i class="fa fa-angle-right"></i></span></a></li>-->
        {% endif %}
        {% endfor %}
        <li><a href="{% url 'schema:root-list' %}">Schema
            Browser</a></li>

    </ul>
</div>
{% endblock %}

{% block main %}
<h2 class="text-center"> Browse survey-derived data products on an object-by-object basis.</h2>
<p class="lead text-center">

Choose a survey to get started.</p>
<!--<h3 id="data-access">Data Access</h3>-->
<div>

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#survey" aria-controls="survey" role="tab" data-toggle="tab">By Survey</a></li>
        <li role="presentation" class=""><a href="#astroobject" aria-controls="" role="tab" data-toggle="tab">By Astronomical Object</a></li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content" id="data-access">
      <div role="tabpanel" class="tab-pane active" id="survey">
          {% for value in response.data.surveys %}
              {% if forloop.first %}
              <div class="row box-row">
              {% endif %}
              <div class="col-xs-12 col-sm-6 col-md-4">
                  <a href="{% if value.current_version != 0%}{{value.survey}}/{% endif %}"
                     class="box {% if value.current_version == 0%}disabled{% endif%}">
                      <div class="box-contents text-justify">
                          <img class="img-responsive center-block" style="max-width:80px"
                               src="/static/restapi_app/img/documentation/{{value.survey}}.png"><br>
                          <div class="lead p text-center">{{value.survey | uppercase}}</div>
                          <div class="sub text-center"><span class="sub-heading">{{value.count}} objects</span></div>

                          {% with "data_browser/root/surveys/"|add:value.survey|add:".html" as template %}
                          <!--<span class="sub">{% include template %}</span>-->
                          {% endwith %}
                          {% if value.current_version == 0%}
                          <span class="status btn-xs btn-default"><i
                                  class="fa fa-hourglass-half"></i> in progress</span>
                          {% else %}
                          <span class="status btn-xs btn-default text-success"> <i class="fa fa-map-marker"></i> {{value.current_version}}</span>
                          {% endif%}
                      </div>
                  </a>
              </div>
              {% if forloop.counter|divisibleby:3 %}
              </div><div class="row box-row">
              {% endif %}
              {% if forloop.last %}
              </div>
              {% endif %}

          {% endfor %}

       </div>
      <div role="tabpanel" class="tab-pane" id="astroobject">Coming soon...</div>
  </div>

</div>

<h3 id="features">Features</h3>
<p>Surveys are a collection of astronomical
    objects, each with a unique set of data products. Each astronomical object's components are organised into a
    tree-like structure, allowing you to discover derived properties and data products, along with any
    associated meta-data.</p>
<p>The data browser tool provides the following functionality:</p>
<ul class="p">
    <li>Quick-look at each astronomical object's data products in a particular
        data release, including visualizations, processing information and associated properties.
    </li>
    <li>Download individual data products as multi-extension FITS
        files, with all relevant processing information contained within the FITS header.
    </li>
    <li>Define a sample of SAMI objects filtering on some
        catalogue property.
    </li>
    <li>Data products for this selection can be downloaded for offline use.</li>
</ul>
<br>
<p>For more information, including articles on Data Browser examples, head over to the <a
        href="{% url 'documentation:topic-detail' slug='data-browser' %}">Data Browser Documentation</a>.</p>







{% endblock %}
