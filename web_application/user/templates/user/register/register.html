{% extends 'rest_framework/api.html' %}
{% load staticfiles %}
{% load rest_framework %}
{% load i18n %}
{% load internal_extras %}

{% block head-extra %}
<link rel="stylesheet" type="text/css" href="{% static 'user/css/user/user.min.css' %}"/>
{% endblock %}
{% block title %}Register{% endblock %}
{% block bodyclass %}aat_outer{% endblock %}
{% block breadcrumbclass %}inverted{% endblock %}
{% block breadcrumbs %}
<li class="active"><a href="{% url 'index' %}">Home</a></li>
<li><a href="{% url 'user-register' %}">Register</a></li>
{% endblock %}

{% block page_title_banner %}{% endblock %}

{% block no_sidebar %}

    {% if display_edit_forms %}
    <br>
    <div class="row">
        <div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1">
            <div class="panel panel-default">
                <div class="panel-heading">
                    REGISTER
                    <i class="fa fa-pencil-square-o pull-right" style="margin-top:3px"></i>
                </div>
                <div class="panel-body">
                    {% if post_form %}
                        <div class="tab-pane" id="post-object-form">
                            {% with form=post_form %}
                            <form action="{{ request.get_full_path }}" id="registration-form" method="POST" enctype="multipart/form-data" novalidate>
                                <fieldset>
                                    {% csrf_token %}
                                    {{ post_form }}
                                    <div class="form-actions">
                                        <button class="btn btn-primary form-control" title="Create New User">REGISTER
                                        </button>
                                    </div>
                                    <br>
                                    <p style="margin-top:5px;">Already have an Account?
                                        <a href="{% url 'rest_framework:login' %}" class="text-uppercase">
                                            <span>Sign In</span>
                                            <i class="fa fa-lock"></i>
                                        </a>
                                    </p>
                                </fieldset>
                            </form>
                            {% endwith %}
                        </div>
                    {% else %}
                        <strong class="text-success text-uppercase">Success </strong>
                        <p>New user registered.
                            <a href="{% url 'rest_framework:login' %}" class="text-uppercase pull-right">
                                <span>Sign In</span>
                                <i class="fa fa-lock"></i>
                            </a>
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    <script src="{% static 'user/js/match_passwords.js'%}"></script>
    <script>
        match_passwords('password', 'confirm_password', '#registration-form');
        // HACK inject bootstrap classes to change form layout (DRF restricts to horizontal)
        $('form .form-group').each(function(){
            $(this).children('label.col-sm-2').removeClass('col-sm-2');
            if ($(this).children('.col-sm-10').length){
                $(this).children('.col-sm-10').replaceWith(function() { return $(this).contents(); });
            }
        });

    </script>
{% endblock %}