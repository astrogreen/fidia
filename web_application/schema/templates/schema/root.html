{% extends 'rest_framework/api.html' %}
{% load staticfiles %}
{% load rest_framework %}
{% load internal_extras %}
{% block title %}Schema{% endblock %}
{% block head-extra %}

<link rel="stylesheet" type="text/css" href="{% static 'schema/css/schema/schema.min.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'data_browser/css/sample/sample.min.css' %}"/>
{% endblock %}
{% block bodyclass %}{% endblock %}
{% block breadcrumbclass %}{% endblock %}

{% block page_title %}Schema{% endblock %}
{% block useful_links %}
<li role="presentation" ><a href="#data-structure">Data Structure</a></li>
{% endblock useful_links %}

{% block content-test %}
<div class="row">
    <div class="col-xs-12">
        <h2>By Survey</h2>
    </div>
</div>
<div class="row schema-browser-root">
    <div class="col-xs-12">
        <p>AAODC hosts surveys containing a variety of astronomical objects. You can view the schema for the current
            surveys ingested into the system below.</p>
        <br>
    </div>
    {% for sample in response.data.samples %}
    <div class="col-sm-6">
        <a href="{{sample}}/">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="media-container">
                        <div class="img-container">
                            <img class="img-responsive {{sample}}" src="/static/data_browser/img/logo-{{sample}}-dark.png">
                        </div>
                    </div>
                    <div class="header-container">
                        <h3>{{sample | uppercase}}
                            <small>
                                {% with "data_browser/root/samples/object_count_"|add:sample|add:".html" as template %}
                                    {% include template %}
                                {% endwith %}
                                objects
                            </small>
                        </h3>
                        {% with "data_browser/root/samples/"|add:sample|add:".html" as template %}
                        {% include template %}
                        {% endwith %}
                    </div>
                </div>
            </div>
        </a>
    </div>
    {% endfor %}
</div>

<div class="row">
    <div class="col-xs-12">
        <h2>By Queryable Properties</h2>
    </div>
</div>
<div class="row schema-browser-root">
    <div class="col-xs-12">
        <p>Astronomical object properties that can be queried using SQL will also appear in this Schema.</p>
        <br>
        <p>-- insert query builder schema here</p>
    </div>

</div>

<div class="row" id="data-structure">
    <div class="col-xs-12">
        <h2>Data Structure</h2>
        <p>Here at AAODC we've adopted an astronomical object-orientated data model.
            Data are organised into samples containing astronomical objects,
            such as stars and galaxies, with data members such as spectra, magnitudes and velocities.
            By presenting the
            properties and measurements of objects in this way, we simplify analysis and visualisation by providing a
            uniform representation of an astrophysical object's characteristics.

            This data model allows us to serve data at restful endpoints, providing an API to those wishing to access data without using
            a web browser.

            The top-level url is sample etc

            This has the added advantage of data being self discoverable.


            The url <a href="">/sami/9532/</a>
            This means our data is self-discoverable. Visit the Data Browser to explore the data.

        </p><p> You can read more on our methodology below.</p>
        <h3>Data Model</h3>
        <p>Surveys hosted at AAODC are are <code>samples</code> containing <code>astronomical
            objects</code>.
            You can read more about our middleware python package, FIDIA <a href="">here</a>. </p>
        <h3>Why Object-Orientated?</h3>
        <p>Our middleware Python package, FIDIA, interacts with data for astronomical objects in a consistent and intuitive
            manner, regardless of the source or format of the data. Considerable past work has focused on standardised
            formats and protocols for working with data. However, these tools are structured around images and tables,
            not stars and galaxies. We take such work a step further by defining an interface to data on disk, on the
            web, in a database, etc. that has a vocabulary (based in part on existing IVOA UCDs) for the physical
            properties of astronomical objects. In our package, the primary objects are astronomical objects, such as
            stars and galaxies, with data members such as spectra, magnitudes and velocities. By presenting the
            properties and measurements of objects in this way, we simplify analysis and visualisation by providing a
            uniform representation of an astrophysical object's characteristics. </p>
        <p>The package accepts that data will always be available in a wide variety of formats and places, and therefore
            it provides a formulaic way to connect to and import from new data sources with ease.
            Cross matching is done between data sources as needed. Throughout, FIDIA has been designed to deliver
            the most likely result in the face of ambiguity, such as multiple versions of data or
            multiple potential cross-matches, but allow for arbitrary, repeatable reconfiguration.
            Our aim with FIDIA is to provide a consistent and intiutive experience for all AAODC users, regardless of
            astronomical knowledge, and to provide a scalable and something data model for connecting new data tools to our interface.
        </p>
    </div>
</div>

{% endblock %}