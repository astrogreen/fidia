{% extends 'rest_framework/api.html' %}
{% load staticfiles %}
{% load rest_framework %}
{% load i18n %}
{% load internal_extras %}
{% block title %}Documentation{% endblock %}

{% block head-extra %}
<link rel="stylesheet" type="text/css" href="{% static 'restapi_app/css/documentation/documentation.min.css' %}"/>
{% endblock %}


<<div class="container-fluid breadcrumb-container {% block breadcrumbclass %}{% endblock %}">
  <div class="container">
    {% block breadcrumbs-outer %}
        {% block breadcrumbs %}
          <ul class="breadcrumb ">
            <li><a href="{% url 'index' %}">Home</a></li>
            <li class="active"><a href="">Documentation</a></li>
          </ul>
        {% endblock %}
    {% endblock %}
  </div>
</div>

{% block content_render %}
<h1 class="headline">
    <span>Documentation</span>
</h1>
<div class="container">
  <div class="row">
    <!--Nav Bar -->
    <nav class="col-sm-2 hidden-xs docs-sidebar">
        <ul id="sidebar" class="nav nav-stacked fixed">
            <li>
                <a href="#docs-welcome">Start Here</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-about">About the node</a></li>
                    <li><a href="#docs-access-method">Access Types</a></li>
                </ul>
            </li>
            <li>
                <a href="#docs-data">Data</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-data-info">Info</a></li>
                </ul>
            </li>
            <li>
                <a href="#docs-query">Query</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-query-builder">Query Builder</a></li>
                    <li><a href="#docs-sql">SQL</a></li>
                    <li><a href="#docs-query-examples">Examples</a></li>
                </ul>
            </li>
            <li>
                <a href="#docs-browse">Browse</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-survey-browser">Survey Browser</a></li>
                    <li><a href="#docs-sov">Single Object Viewer</a></li>
                </ul>
            </li>
            <li>
                <a href="#docs-surveys">Surveys</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-gama">GAMA</a></li>
                    <li><a href="#docs-sami">SAMI</a></li>
                </ul>
            </li>
            <li>
                <a href="#docs-restful">Web-based API</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-restful">Restful Interface</a></li>
                </ul>
            </li>
            <li>
                <a href="#docs-python-api">Python API (FIDIA)</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-fidia">FIDIA</a></li>
                </ul>
            </li>
            <li>
                <a href="#docs-faq">FAQ</a>
                <ul class="nav nav-stacked">
                    <li><a href="#docs-faq1">Questions</a></li>

                </ul>
            </li>
        </ul>
    </nav>
    <!--Main Content -->
    <div class="col-sm-10 col-xs-12">
      <section id="docs-welcome" class="group">
          <h2 class="headline">
            <span>Welcome</span>
          </h2>
          <h4>DOCUMENTATION UNDER REVISION</h4>
          <div id="docs-about" class="subgroup">
              <h3>About the node</h3>
              <p>
                  Welcome to the ASVO-AAT node. The ASVO-AAT Node project aims
                  to provide IVOA-compliant access to all AAT and UKST data
                  including legacy (2dFGRS, 6dFGS, WiggleZ, RAVE, GAMA), ongoing
                  (SAMI, GALAH, OzDES, 2dFLenS) and future (TAIPAN, FunnelWeb)
                  surveys.
              </p>
              <p>
                  Navigate through the documentation using the contents panel
                  on the left.
              </p>
          </div>
          <div id="docs-access-method" class="subgroup">
              <h3>Access Types</h3>
              <p>
                  The ASVO-AAT node data can be accessed in a multitude of ways,
                  depending on your data needs.
              </p>
              <div class="row">
                  <div class="col-xs-offset-6 col-xs-6">
                      <h5 class="text-right">
                        <span class="red">In Design</span>
                        <span class="orange">In Development</span>
                        <span class="yellow">User Testing</span>
                        <span class="green">Alpha Release</span>
                      </h5>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-yellow">
                            </div>
                            <div class="panel-body">
                                <h4>Survey Exploration</h4>
                                <p>I want to browse the available data, data products, and meta-data for a particular survey.</p>
                                <a href="" class="pull-right">Data Browser</a>
                            </div>
                        </div>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-orange">
                            </div>
                            <div class="panel-body">
                                <h4>Single Object</h4>
                                <p>I know the object identifier according to the survey,
                                    e.g., GAMA object G65406. I want to explore and download the available
                                    node data on the object, in a range of formats.</p>
                                <a href="" class="pull-right">Single Object Viewer</a>
                            </div>
                        </div>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-orange">
                            </div>
                            <div class="panel-body">
                                <h4>Multiple objects from the same survey</h4>
                                <p>I have a list of object IDs or positions of sources that reside in an
                            AAT-node survey (e.g., GAMA sources G65406, G106376). I wish to return
                            survey-derived parameters for those sources (e.g., redshifts from GAMA
                            catalogue SpecObjAll).</p>
                                <a href="" class="pull-right">SQL</a>
                            </div>
                        </div>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-yellow">
                            </div>
                            <div class="panel-body">
                                <h4>Create and return a sample from a survey</h4>
                                <p>I want to create a sample of objects from a particular
                                survey, filtering on some parameter(s) and return
                                available rows of objects across several catalogues. See
                                examples <a href="#docs-UC1">Use Case 1</a> and
                                <a href="#docs-UC2">Use Case 2</a>.</p>
                                <a href="" class="pull-right">Query Builder</a>
                            </div>
                        </div>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-orange">
                            </div>
                            <div class="panel-body">
                                <h4>Multiple Objects from different surveys</h4>
                                <p>I want to view the closest sources to an uploaded list of RA, DEC coordinates
                            within some radius.</p>
                                <a href="" class="pull-right"> SOV </a>&nbsp;
                                <a  class="disabled "> Position Search </a>
                            </div>
                        </div>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-red">
                            </div>
                            <div class="panel-body">
                                <h4>Cross match my sources with a survey</h4>
                                <p>I want to upload a list of RA, DEC positions and cross match to all
                        available survey objects, to within some radius.</p>
                                <a class="pull-right disabled">Position Search</a>
                            </div>
                        </div>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-red">
                            </div>
                            <div class="panel-body">
                                <h4>At Position</h4>
                                <p>I want to view available data for some radius around RA, DEC coordinates.</p>
                                <a class="pull-right disabled">Position Search</a>
                            </div>
                        </div>
                  </div>
                  <div class="col-sm-4 col-xs-4">
                        <div class="panel panel-default ">
                            <div class="panel-heading panel-background-red">
                            </div>
                            <div class="panel-body">
                                <h4>Look at available data</h4>
                                <p>I want to view imaging (where available) and source positions for the AAT
                        surveys.</p>
                                <a class="pull-right disabled">Data Explorer</a>
                            </div>
                        </div>
                  </div>
              </div>
          </div>
      </section>
      <section id="docs-data" class="group">
          <h2 class="headline">
            <span>Data</span>
          </h2>
          <div id="docs-data-info" class="subgroup">
              <p>info on currently available data</p>
          </div>
      </section>
      <section id="docs-query" class="group">
          <h2 class="headline">
            <span>Query</span>
          </h2>
          <div id="docs-query-builder" class="subgroup">
              <h3>Query Builder</h3>
                <div class="col-xs-12">
                    <p>
                        The Query Builder form allows you to construct complicated
                        queries on the database with ease without writing any
                        code. It provides available catalogues and columns easily
                        to reduce query mistakes and query construction time, allowing for
                        less SQL-writing and more data exploration.
                    </p>
                    <div class="docs-example">
                        <!--<img src="/static/images/documentation/GAMA-example0.png" class='img-responsive'-->
                       <!--alt="Screen shot of query">-->
                    </div>
                  <p><br>
                      Queries can be made on known survey objects or
                      at specific coordinates on the sky (RA, DEC). The query
                      builder is sufficient for most use cases, however particularly
                      complicated queries can be submitted via the SQL form.
                  </p><br>
                </div>
                  <h4>SQL Syntax</h4>
                  <dl class="dl-horizontal">
                    <dt>Select</dt>
                    <dd>Select the catalogues you wish to query via the
                      <button class="btn btn-default btn-xs btn-demo" type="button">
                        Catalogue <span class="caret"></span> </button> dropdown.</dd>
                    <dd>Available columns for the selected catalogue will be
                      shown in the <button class="btn btn-default btn-xs btn-demo"
                      type="button"> Columns <span class="caret"></span> </button>
                      dropdown. If you are looking for a particular column, the
                      search bar can help.</dd>
                    <dd>
                      Multiple catalogues can be added using the
                      <button class='btn btn-demo btn-circle'><span class='glyphicon
                         glyphicon-plus'></span></button> Add Fields button. Currently,
                         up to 5 catalogues can be queried simultaneously.
                    </dd>
                    <dt>Join</dt>
                    <dd>If you have selected two or more catalogues to return results
                      from, use the Join row to choose which columns from each are
                      common fields. For example, you may want to return filtered
                      results from both the catalogues <samp>g3cgal</samp> and <samp>specobj</samp>.
                      In which case, you could join as:
                      <button class="btn btn-default btn-xs btn-demo"
                      type="button"> G3CGAL.CATAID <span class="caret"></span> </button>
                      <button class="btn btn-default btn-xs btn-demo"
                      type="button"> INNER <span class="caret"></span> </button>
                      <button class="btn btn-default btn-xs btn-demo"
                      type="button"> SpecObj.CATAID <span class="caret"></span> </button>
                      <br>
                      <strong>If you wish to return columns from
                      multiple catalogues, you must join the appropriate columns
                      from each catalogue</strong>.
                    </dd><br>
                    <dd>
                      Supported join types are detailed below.
                      <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th>
                            Join
                          </th>
                          <th>
                            Description
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            <samp>INNER</samp>
                          </td>
                          <td>
                            Limited to the rows that exist in both tables. For example,
                            in our join above, a <samp>CATAID</samp> that
                            appears in both <samp>g3cgal</samp> and <samp>specobj</samp> catalogues
                            would be returned, however if a <samp>CATAID</samp>
                            appeared in only one of <samp>g3cgal</samp> and <samp>specobj</samp>,
                            it would not be returned. If you are unsure which join
                            type to select, <samp>INNER</samp> is usually the best option.
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <samp>LEFT</samp>
                          </td>
                          <td>
                            All rows from the first (or left hand side) catalogue
                            are preserved. Rows from the right hand catalogue will
                            be returned <em>only</em> if they have a match in the
                            left catalogue. Where there are values from the left
                            catalogue and not the right, values will be set as
                            <samp>NULL</samp>.
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <samp>RIGHT</samp>
                          </td>
                          <td>
                            All rows from the second (or right hand side) catalogue
                            are preserved. Rows from the left hand catalogue will be
                            returned <em>only</em> if they have a match in the right
                            catalogue. Where there are values from the right catalogue
                            and not the left, values will be set as <samp>NULL</samp>.
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <samp>OUTER</samp>
                          </td>
                          <td>
                            A full outer join returns all rows from both catalogues,
                            regardless of whether there are any matches. As in the
                            <samp>LEFT</samp> and <samp>RIGHT</samp> joins, empty
                            values will be set at NULL.
                          </td>
                        </tr>
                      </tbody>
                      </table>
                    </dd>
                    <dt>Filter</dt>
                    <dd>Set the constraints that determine which rows of the
                      above catalogues(s) will be returned by your query. Leaving this
                      empty will simply return all rows. </dd>
                      <dd>To constrain a parameter
                      <samp>BETWEEN</samp> two values, simply separate by a
                      comma, for example to filter a column value between 0.1 and 0.3
                      enter <samp>0.1,0.3</samp> in the filter value input box.</dd>
                    <dt>Results Format</dt>
                    <dd>Format the results file as <samp>ASCII</samp>,
                      <samp>CSV</samp> or <samp>FITS</samp>.</dd>
                  </dl>
          </div>
          <div id="docs-query-sql" class="subgroup">
              <h3>SQL</h3>
              <p></p>
          </div>
          <div id="docs-query-examples" class="subgroup">
              <h3>Examples</h3>
              <p>
                Examples of various queries that can be constructed using the query form are shown here. If you have an
                impressive query constructed with the form that you would like us to feature, please let us know.
            </p>
              <h4>Example 1</h4>
              <p>Return all galaxies in a pair, with redshift (0.1 &#60;
                  z &#60; 0.3) and quality flag cut.</p>
              <div class="row">
              <div class="col-sm-6">
              <table class="table table-bordered ">
                  <thead>
                  <tr>
                      <th>DMU</th>
                      <th>Catalogue</th>
                      <th>Parameter</th>
                      <th>Info</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                      <th scope="row">Groupfindingv05</th>
                      <td>G3CGalsInPair</td>
                      <td>Gal1CATAID, Gal2CATAID</td>
                      <td>G3CGalsInPair is a catalogue of galaxies that
                          live in pairs (thus gal1-gal2 and gal2-gal1 combinations
                          are both listed), so here we need only match to
                          Gal1CATAID.
                      </td>
                  </tr>
                  <tr>
                      <th scope="row">StellarMassesv08</th>
                      <td>StellarMasses</td>
                      <td>CATAID, Z, nQ</td>
                      <td>All CATAID matched to Gal1CATAID, where 0.1 &#60; Z &#60;
                          0.3, nQ &#62; 2
                      </td>
                  </tr>
                  </tbody>
              </table>
              </div>
              <div class="col-sm-6">
                  <div class="docs-example">
                    <img src="{% static 'restapi_app/img/documentation/example1.png' %}" class='img-responsive'
                       alt="Screen shot of query">
                  </div>
              </div>
                  </div>
          </div>

      </section>
      <section id="docs-browse" class="group">
          <h2 class="headline">
            <span>Browse</span>
          </h2>
          <div id="docs-survey-browser" class="subgroup">
              <a href=""><h3>Survey Browser</h3></a>
                <div class="row">
                    <div class="col-sm-6">
                      <p>Data are organised hierarchically. Each survey has the following link structure:  </p>
                      <dl class="">
                            <dt>survey/</dt>
                            <dd style="margin-left:10px;">Available survey objects, products, schema browser etc. <br> e.g, <a href="">sami/</a></dd>
                            <dt>survey/galaxy</dt>
                            <dd style="margin-left:10px;">Available data for the object 'galaxy'.  <br> e.g, <a href="">sami/9352/</a></dd>
                            <dt>survey/galaxy/property/</dt>
                            <dd style="margin-left:10px;">
                                Displays an on-the-fly rendering of the property (if sensible). Download in a variety of formats [fits, json, csv].
                                <br> e.g, <a href="">sami/9352/velocity_map/</a>
                            </dd>
                            <dt>survey/galaxy/property/attribute</dt>
                            <dd style="margin-left:10px;">
                                Displays a list of the attributes for the property.
                                <br> e.g, <a href="">sami/9352/velocity_map/value/</a>
                            </dd>
                      </dl>
                  </div>
                  <div class="col-sm-6">
                      <div class="docs-example">
                        <img src="{% static 'restapi_app/img/documentation/browse.png' %}" class='img-responsive'
                           alt="Screen shot of query">
                          <p>Available data for the SAMI object 273952 at <a href="">sami/273952/</a></p>
                      </div>
                  </div>
                </div>

          </div>
          <div id="docs-sov" class="subgroup">
              <a href="{% url 'sov-list'%}"><h3>Single Object Viewer</h3></a>
              <p>The <a href="{% url 'sov-list' %}">SOV</a> currently lists the key SAMI data products for any object.
              Where available, the SOV brings together data from all surveys hosted at the AAT-Node. Select a survey to populate the dropdown box with available objects. Search for your object in the dropdown
              by scrolling or typing in the box.</p>
              <div class="docs-example">
                    <img src="{% static 'restapi_app/img/documentation/sov.png' %}" class='img-responsive'
                       alt="Screen shot of query">
                  </div>
              <p>Data visualisations are generated on the fly, and are available for immediate download.</p>
          </div>
      </section>
      <section id="docs-surveys" class="group">
            <h2 class="headline">
            <span>Surveys</span>
          </h2>
            <div id="docs-gama" class="subgroup">
                <div class="pull-right"><img class="img-responsive gama" src="{% static 'restapi_app/img/logo/logo-gama.png'%}"></div>
                <h3>Galaxy and Mass Assembly Survey</h3>
                <h4>About</h4>
                <p>
                    GAMA is a project to exploit the latest generation of ground-based and space-borne survey facilities
                    to study cosmology and galaxy formation and evolution.

                    At the heart of this project lies the GAMA spectroscopic survey of ~300,000 galaxies down to
                    r < 19.8 mag over ~286 deg2, carried out using the AAOmega multi-object spectrograph on the
                    Anglo-Australian Telescope (AAT) by the GAMA team. This project was awarded 210 nights over
                    7 years (2008–2014) and the observations are now completed. This survey builds on, and is augmented
                    by, previous spectroscopic surveys such as the Sloan Digital Sky Survey (SDSS), the 2dF
                    Galaxy Redshift Survey (2dFGRS) and the Millennium Galaxy Catalogue (MGC).
                </p>
                <p>
                    This node provides access to the publically available GAMA
                    data products.
                    Current catalogue and version information can be found
                    <a href="http://www.gama-survey.org/dr2/schema/">here</a>.
                </p>

            </div>
            <div id="docs-sami" class="subgroup">
                <div class="pull-right"><img class="img-responsive sami" src="{% static 'restapi_app/img/logo/logo-sami.png'%}"></div>
                <h3>SAMI</h3>
                <h4>About</h4>
                <p>
                    The SAMI Galaxy Survey began in March 2013, with the intention of creating a large survey of 3000
                    galaxies across a large range of environments. The key science goals of the SAMI Survey are to answer the following questions:
                    <ul>
                        <li>What is the physical role of environment in galaxy evolution?</li>
                        <li>What is the relationship between stellar mass growth and angular momentum development in galaxies?</li>
                        <li>How does gas get into and out of galaxies, and how does this drive star formation?</li>
                    </ul>
                    The data for the SAMI Galaxy Observatory is being collected using SAMI,
                    the Sydney-Australian-Astronomical-Observatory Multi-object Integral-Field Spectrograph.
                    SAMI is a brand new instrument on the 4-meter Anglo-Australian Telescope at Siding Spring Observatory.
                    <br>
                    Integral-field spectroscopy (IFS) allows a unique view of how stars and gas zoom around inside distant
                    galaxies because we collect dozens of spectra across the entire face of each galaxy.
                    <br>
                    The first version of SAMI was constructed and collecting photons within nine months of inception.
                    University of Sydney Research Fellow Lisa Fogarty published the first science with the initial SAMI
                    spectra. A thorough instrument upgrade to SAMI2 was successfully commissioned in February 2013
                    thanks to the efforts of the instrument and science teams and the support of staff at the newly-reopened Siding Spring Observatory.
                </p>
            </div>
      </section>

        <section id="docs-web-api" class="group">
            <h2 class="headline">
            <span>Restful Interface</span>
          </h2>
            <div id="docs-restful" class="subgroup row">
            </div>
        </section>
         <section id="docs-python-api" class="group">
            <h2 class="headline">
            <span>FIDIA</span>
          </h2>
            <div id="docs-fidia" class="subgroup row">
                </div>
        </section>
        <section id="docs-faq" class="group">
            <h2 class="headline">
                <span>Frequently Asked Questions</span>
            </h2>

            <div id="docs-faq1" class="subgroup">
                <h3>Questions</h3>
            </div>
        </section>
    </div>
  </div>
</div>
{% endblock %}
{% block footer-extra %}
<script>
$( document ).ready(function() {
    //DOCS
    $('body').scrollspy({
        target: '.docs-sidebar',
        offset: 40
    });
});
</script>
{% endblock %}